<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.2">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.2" color="#222">
  <link rel="alternate" href="/atom.xml" title="一汀烟雨杏花寒" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.2">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="终于有人把 Docker 讲清楚了 作者 | 乐章 来源 | cnblogs.com&#x2F;zhangxingeng&#x2F;p&#x2F;11236968.html 编辑：Java技术栈（id：javastack） 一、简介1、了解Docker的前生LXCLXC为Linux Container的简写。可以提供轻量级的虚拟化，以便隔离进程和资源，而且不需要提供指令解释机制以及全虚拟化的其他复杂性。相当于C++中的Name">
<meta name="keywords" content="docker">
<meta property="og:type" content="article">
<meta property="og:title" content="终于有人把Docker讲清楚了">
<meta property="og:url" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;index.html">
<meta property="og:site_name" content="一汀烟雨杏花寒">
<meta property="og:description" content="终于有人把 Docker 讲清楚了 作者 | 乐章 来源 | cnblogs.com&#x2F;zhangxingeng&#x2F;p&#x2F;11236968.html 编辑：Java技术栈（id：javastack） 一、简介1、了解Docker的前生LXCLXC为Linux Container的简写。可以提供轻量级的虚拟化，以便隔离进程和资源，而且不需要提供指令解释机制以及全虚拟化的其他复杂性。相当于C++中的Name">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922202.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922216.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922229.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922232.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922233.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572599922235.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572600680712.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572600696159.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572600706623.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572600714042.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572600728419.webp">
<meta property="og:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640-1572601422584.webp">
<meta property="og:updated_time" content="2019-11-07T10:24:47.423Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http:&#x2F;&#x2F;geoffen.github.io&#x2F;2019&#x2F;10&#x2F;31&#x2F;%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86&#x2F;640.webp">

<link rel="canonical" href="http://geoffen.github.io/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-postbottom {
  cursor: pointer;
  height: 26px;
  margin-top: 10px;
  position: relative;
}
#needsharebutton-postbottom .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 3px;
  display: initial;
  padding: 1px 4px;
}
</style>
  <title>终于有人把Docker讲清楚了 | 一汀烟雨杏花寒</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一汀烟雨杏花寒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">no error, no warning。</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://geoffen.github.io/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/portrait.jpg">
      <meta itemprop="name" content="Frank">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一汀烟雨杏花寒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          终于有人把Docker讲清楚了
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-10-31 17:18:26" itemprop="dateCreated datePublished" datetime="2019-10-31T17:18:26+08:00">2019-10-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-07 18:24:47" itemprop="dateModified" datetime="2019-11-07T18:24:47+08:00">2019-11-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" itemprop="url" rel="index">
                    <span itemprop="name">持续集成</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="终于有人把-Docker-讲清楚了"><a href="#终于有人把-Docker-讲清楚了" class="headerlink" title="终于有人把 Docker 讲清楚了"></a>终于有人把 Docker 讲清楚了</h2><p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640.webp" alt="img"></p><blockquote>
<p>作者 | 乐章</p>
<p>来源 | cnblogs.com/zhangxingeng/p/11236968.html</p>
<p>编辑：Java技术栈（id：javastack）</p>
</blockquote><h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a><strong>一、简介</strong></h2><h3 id><a href="#" class="headerlink" title></a></h3><h3 id="1、了解Docker的前生LXC"><a href="#1、了解Docker的前生LXC" class="headerlink" title="1、了解Docker的前生LXC"></a><strong>1、了解Docker的前生LXC</strong></h3><p>LXC为Linux Container的简写。可以提供轻量级的虚拟化，以便隔离进程和资源，而且不需要提供指令解释机制以及全虚拟化的其他复杂性。相当于C++中的NameSpace。容器有效地将由单个操作系统管理的资源划分到孤立的组中，以更好地在孤立的组之间平衡有冲突的资源使用需求。</p><a id="more"></a>


<p>与传统虚拟化技术相比，它的优势在于：</p>
<p>（1）与宿主机使用同一个内核，性能损耗小；</p>
<p>（2）不需要指令级模拟；</p>
<p>（3）不需要即时(Just-in-time)编译；</p>
<p>（4）容器可以在CPU核心的本地运行指令，不需要任何专门的解释机制；</p>
<p>（5）避免了准虚拟化和系统调用替换中的复杂性；</p>
<p>（6）轻量级隔离，在隔离的同时还提供共享机制，以实现容器与宿主机的资源共享。</p>
<p>总结：Linux Container是一种轻量级的虚拟化的手段。</p>
<p>Linux Container提供了在单一可控主机节点上支持多个相互隔离的server container同时执行的机制。Linux Container有点像chroot，提供了一个拥有自己进程和网络空间的虚拟环境，但又有别于虚拟机，因为lxc是一种操作系统层次上的资源的虚拟化。</p>
<h3 id="2、LXC与docker什么关系？"><a href="#2、LXC与docker什么关系？" class="headerlink" title="2、LXC与docker什么关系？"></a><strong>2、LXC与docker什么关系？</strong></h3><p>docker并不是LXC替代品，docker底层使用了LXC来实现，LXC将linux进程沙盒化，使得进程之间相互隔离，并且能够课哦内阁制各进程的资源分配。</p>
<p>在LXC的基础之上，docker提供了一系列更强大的功能。</p>
<h3 id="3、什么是docker"><a href="#3、什么是docker" class="headerlink" title="3、什么是docker"></a><strong>3、什么是docker</strong></h3><p>docker是一个开源的应用容器引擎，基于go语言开发并遵循了apache2.0协议开源。</p>
<p>docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的linux服务器，也可以实现虚拟化。</p>
<p>容器是完全使用沙箱机制，相互之间不会有任何接口（类iphone的app），并且容器开销极其低。</p>
<h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h3 id="4、docker官方文档"><a href="#4、docker官方文档" class="headerlink" title="4、docker官方文档"></a><strong>4、docker官方文档</strong></h3><p><a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a></p>
<h3 id="-2"><a href="#-2" class="headerlink" title></a></h3><h3 id="5、为什么docker越来越受欢迎"><a href="#5、为什么docker越来越受欢迎" class="headerlink" title="5、为什么docker越来越受欢迎"></a><strong>5、为什么docker越来越受欢迎</strong></h3><p>官方话语：</p>
<ul>
<li>容器化越来越受欢迎，因为容器是：</li>
</ul>
<ul>
<li><ul>
<li>灵活：即使是最复杂的应用也可以集装箱化。</li>
<li>轻量级：容器利用并共享主机内核。</li>
<li>可互换：您可以即时部署更新和升级。</li>
<li>便携式：您可以在本地构建，部署到云，并在任何地方运行。</li>
<li>可扩展：您可以增加并自动分发容器副本。</li>
<li>可堆叠：您可以垂直和即时堆叠服务。</li>
</ul>
</li>
</ul>
<h3 id="-3"><a href="#-3" class="headerlink" title></a></h3><ul>
<li><h3 id="镜像和容器（contalners）"><a href="#镜像和容器（contalners）" class="headerlink" title="镜像和容器（contalners）"></a>镜像和容器（contalners）</h3></li>
</ul>
<p>通过镜像启动一个容器，一个镜像是一个可执行的包，其中包括运行应用程序所需要的所有内容包含代码，运行时间，库、环境变量、和配置文件。</p>
<p>容器是镜像的运行实例，当被运行时有镜像状态和用户进程，可以使用docker ps 查看。</p>
<ul>
<li><h3 id="容器和虚拟机"><a href="#容器和虚拟机" class="headerlink" title="容器和虚拟机"></a>容器和虚拟机</h3></li>
</ul>
<p>容器时在linux上本机运行，并与其他容器共享主机的内核，它运行的一个独立的进程，不占用其他任何可执行文件的内存，非常轻量。</p>
<p>虚拟机运行的是一个完成的操作系统，通过虚拟机管理程序对主机资源进行虚拟访问，相比之下需要的资源更多。</p>
<p> <img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640.webp" alt="img"></p>
<h3 id="-4"><a href="#-4" class="headerlink" title></a></h3><h3 id="6、docker版本"><a href="#6、docker版本" class="headerlink" title="6、docker版本"></a><strong>6、docker版本</strong></h3><p>Docker Community Edition（CE）社区版</p>
<p>Enterprise Edition(EE) 商业版</p>
<h3 id="-5"><a href="#-5" class="headerlink" title></a></h3><h3 id="7、docker和openstack的几项对比"><a href="#7、docker和openstack的几项对比" class="headerlink" title="7、docker和openstack的几项对比"></a><strong>7、docker和openstack的几项对比</strong></h3><p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640.webp" alt="img"></p>
<h3 id="8、容器在内核中支持2种重要技术"><a href="#8、容器在内核中支持2种重要技术" class="headerlink" title="8、容器在内核中支持2种重要技术"></a><strong>8、容器在内核中支持2种重要技术</strong></h3><p>docker本质就是宿主机的一个进程，docker是通过namespace实现资源隔离，通过cgroup实现资源限制，通过写时复制技术（copy-on-write）实现了高效的文件操作（类似虚拟机的磁盘比如分配500g并不是实际占用物理磁盘500g）</p>
<p>1）namespaces 名称空间</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922202.webp" alt="img"></p>
<p> 2）control Group 控制组</p>
<p>cgroup的特点是：　　　　　　</p>
<ul>
<li>cgroup的api以一个伪文件系统的实现方式，用户的程序可以通过文件系统实现cgroup的组件管理</li>
<li>cgroup的组件管理操作单元可以细粒度到线程级别，另外用户可以创建和销毁cgroup，从而实现资源载分配和再利用</li>
<li>所有资源管理的功能都以子系统的方式实现，接口统一子任务创建之初与其父任务处于同一个cgroup的控制组</li>
</ul>
<p>四大功能：</p>
<ul>
<li>资源限制：可以对任务使用的资源总额进行限制</li>
<li>优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级</li>
<li>资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等</li>
<li>任务控制：cgroup可以对任务执行挂起、恢复等操作</li>
</ul>
<h3 id="-6"><a href="#-6" class="headerlink" title></a></h3><h3 id="9、了解docker三个重要概念"><a href="#9、了解docker三个重要概念" class="headerlink" title="9、了解docker三个重要概念"></a><strong>9、了解docker三个重要概念</strong></h3><p>1）image镜像</p>
<p>docker镜像就是一个只读模板，比如，一个镜像可以包含一个完整的centos，里面仅安装apache或用户的其他应用，镜像可以用来创建docker容器，另外docker提供了一个很简单的机制来创建镜像或者更新现有的镜像，用户甚至可以直接从其他人那里下周一个已经做好的镜像来直接使用</p>
<p>2）container容器</p>
<p>docker利用容器来运行应用，容器是从镜像创建的运行实例，它可以被启动，开始、停止、删除、每个容器都是互相隔离的，保证安全的平台，可以吧容器看做是要给简易版的linux环境（包括root用户权限、镜像空间、用户空间和网络空间等）和运行再其中的应用程序</p>
<p>3）repostory仓库</p>
<p>仓库是集中存储镜像文件的沧桑，registry是仓库主从服务器，实际上参考注册服务器上存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签（tag）</p>
<p>仓库分为两种，公有参考，和私有仓库，最大的公开仓库是docker Hub，存放了数量庞大的镜像供用户下周，国内的docker pool，这里仓库的概念与Git类似，registry可以理解为github这样的托管服务。</p>
<h3 id="-7"><a href="#-7" class="headerlink" title></a></h3><h3 id="10、docker的主要用途"><a href="#10、docker的主要用途" class="headerlink" title="10、docker的主要用途"></a><strong>10、docker的主要用途</strong></h3><p>官方就是Bulid 、ship、run any app/any where，编译、装载、运行、任何app/在任意地放都能运行。</p>
<p>就是实现了应用的封装、部署、运行的生命周期管理只要在glibc的环境下，都可以运行。</p>
<p>运维生成环境中：docker化。</p>
<ul>
<li>发布服务不用担心服务器的运行环境，所有的服务器都是自动分配docker，自动部署，自动安装，自动运行</li>
<li>再不用担心其他服务引擎的磁盘问题，cpu问题，系统问题了</li>
<li>资源利用更出色</li>
<li>自动迁移，可以制作镜像，迁移使用自定义的镜像即可迁移，不会出现什么问题</li>
<li>管理更加方便了</li>
</ul>
<h3 id="-8"><a href="#-8" class="headerlink" title></a></h3><h3 id="11、docker改变了什么"><a href="#11、docker改变了什么" class="headerlink" title="11、docker改变了什么"></a><strong>11、docker改变了什么</strong></h3><ul>
<li>面向产品：产品交付</li>
<li>面向开发：简化环境配置</li>
<li>面向测试：多版本测试</li>
<li>面向运维：环境一致性</li>
<li>面向架构：自动化扩容（微服务）</li>
</ul>
<h2 id="二、docker架构"><a href="#二、docker架构" class="headerlink" title="二、docker架构"></a><strong>二、docker架构</strong></h2><h3 id="-9"><a href="#-9" class="headerlink" title></a></h3><h3 id="1、总体架构"><a href="#1、总体架构" class="headerlink" title="1、总体架构"></a><strong>1、总体架构</strong></h3><p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922216.webp" alt="img"></p>
<ul>
<li>distribution 负责与docker registry交互，上传洗澡镜像以及v2 registry 有关的源数据</li>
<li>registry负责docker registry有关的身份认证、镜像查找、镜像验证以及管理registry mirror等交互操作</li>
<li>image 负责与镜像源数据有关的存储、查找，镜像层的索引、查找以及镜像tar包有关的导入、导出操作</li>
<li>reference负责存储本地所有镜像的repository和tag名，并维护与镜像id之间的映射关系</li>
<li>layer模块负责与镜像层和容器层源数据有关的增删改查，并负责将镜像层的增删改查映射到实际存储镜像层文件的graphdriver模块</li>
<li>graghdriver是所有与容器镜像相关操作的执行者</li>
</ul>
<h3 id="-10"><a href="#-10" class="headerlink" title></a></h3><h3 id="2、docker架构2"><a href="#2、docker架构2" class="headerlink" title="2、docker架构2"></a><strong>2、docker架构2</strong></h3><p>如果觉得上面架构图比较乱可以看这个架构：</p>
<h3 id="-11"><a href="#-11" class="headerlink" title></a><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922229.webp" alt="img"></h3><p>从上图不难看出，用户是使用Docker Client与Docker Daemon建立通信，并发送请求给后者。</p>
<p>而Docker Daemon作为Docker架构中的主体部分，首先提供Server的功能使其可以接受Docker Client的请求；而后Engine执行Docker内部的一系列工作，每一项工作都是以一个Job的形式的存在。</p>
<p>Job的运行过程中，当需要容器镜像时，则从Docker Registry中下载镜像，并通过镜像管理驱动graphdriver将下载镜像以Graph的形式存储；当需要为Docker创建网络环境时，通过网络管理驱动networkdriver创建并配置Docker容器网络环境；当需要限制Docker容器运行资源或执行用户指令等操作时，则通过execdriver来完成。</p>
<p>而libcontainer是一项独立的容器管理包，networkdriver以及execdriver都是通过libcontainer来实现具体对容器进行的操作。当执行完运行容器的命令后，一个实际的Docker容器就处于运行状态，该容器拥有独立的文件系统，独立并且安全的运行环境等。</p>
<h3 id="3、docker架构3"><a href="#3、docker架构3" class="headerlink" title="3、docker架构3"></a><strong>3、docker架构3</strong></h3><p>再来看看另外一个架构，这个个架构就简单清晰指明了server/client交互，容器和镜像、数据之间的一些联系。</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922232.webp" alt="img"></p>
<p>这个架构图更加清晰了架构</p>
<p>docker daemon就是docker的守护进程即server端，可以是远程的，也可以是本地的，这个不是C/S架构吗，客户端Docker client 是通过rest api进行通信。</p>
<p>docker cli 用来管理容器和镜像，客户端提供一个只读镜像，然后通过镜像可以创建多个容器，这些容器可以只是一个RFS（Root file system根文件系统），也可以ishi一个包含了用户应用的RFS，容器再docker client中只是要给进程，两个进程之间互不可见。</p>
<p>用户不能与server直接交互，但可以通过与容器这个桥梁来交互，由于是操作系统级别的虚拟技术，中间的损耗几乎可以不计。</p>
<h2 id="三、docker架构2各个模块的功能（带完善）"><a href="#三、docker架构2各个模块的功能（带完善）" class="headerlink" title="三、docker架构2各个模块的功能（带完善）"></a><strong>三、docker架构2各个模块的功能（带完善）</strong></h2><p>主要的模块有：Docker Client、Docker Daemon、Docker Registry、Graph、Driver、libcontainer以及Docker container。　　　</p>
<h3 id="-12"><a href="#-12" class="headerlink" title></a></h3><h3 id="1、docker-client"><a href="#1、docker-client" class="headerlink" title="1、docker client"></a><strong>1、docker client</strong></h3><p>docker client 是docker架构中用户用来和docker daemon建立通信的客户端，用户使用的可执行文件为docker，通过docker命令行工具可以发起众多管理container的请求。</p>
<p>docker client可以通过一下三宗方式和docker daemon建立通信：tcp://host:port;unix:path_to_socket;fd://socketfd。，docker client可以通过设置命令行flag参数的形式设置安全传输层协议(TLS)的有关参数，保证传输的安全性。</p>
<p>docker client发送容器管理请求后，由docker daemon接受并处理请求，当docker client 接收到返回的请求相应并简单处理后，docker client 一次完整的生命周期就结束了，当需要继续发送容器管理请求时，用户必须再次通过docker可以执行文件创建docker client。</p>
<h3 id="-13"><a href="#-13" class="headerlink" title></a></h3><h3 id="2、docker-daemon"><a href="#2、docker-daemon" class="headerlink" title="2、docker daemon"></a><strong>2、docker daemon</strong></h3><p>docker daemon 是docker架构中一个常驻在后台的系统进程，功能是：接收处理docker client发送的请求。该守护进程在后台启动一个server，server负载接受docker client发送的请求；接受请求后，server通过路由与分发调度，找到相应的handler来执行请求。</p>
<p>docker daemon启动所使用的可执行文件也为docker，与docker client启动所使用的可执行文件docker相同，在docker命令执行时，通过传入的参数来判别docker daemon与docker client。</p>
<p>docker daemon的架构可以分为：docker server、engine、job。daemon</p>
<h3 id="-14"><a href="#-14" class="headerlink" title></a></h3><h3 id="3、docker-server"><a href="#3、docker-server" class="headerlink" title="3、docker server"></a><strong>3、docker server</strong></h3><p>docker server在docker架构中时专门服务于docker client的server，该server的功能时：接受并调度分发docker client发送的请求，架构图如下：</p>
<p>　　　　<img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922233.webp" alt="img"></p>
<p>在Docker的启动过程中，通过包gorilla/mux（golang的类库解析），创建了一个mux.Router，提供请求的路由功能。在Golang中，gorilla/mux是一个强大的URL路由器以及调度分发器。该mux.Router中添加了众多的路由项，每一个路由项由HTTP请求方法（PUT、POST、GET或DELETE）、URL、Handler三部分组成。</p>
<p>若Docker Client通过HTTP的形式访问Docker Daemon，创建完mux.Router之后，Docker将Server的监听地址以及mux.Router作为参数，创建一个httpSrv=http.Server{}，最终执行httpSrv.Serve()为请求服务。</p>
<p>在Server的服务过程中，Server在listener上接受Docker Client的访问请求，并创建一个全新的goroutine来服务该请求。在goroutine中，首先读取请求内容，然后做解析工作，接着找到相应的路由项，随后调用相应的Handler来处理该请求，最后Handler处理完请求之后回复该请求。</p>
<p>需要注意的是：Docker Server的运行在Docker的启动过程中，是靠一个名为”serveapi”的job的运行来完成的。原则上，Docker Server的运行是众多job中的一个，但是为了强调Docker Server的重要性以及为后续job服务的重要特性，将该”serveapi”的job单独抽离出来分析，理解为Docker Server。</p>
<h3 id="-15"><a href="#-15" class="headerlink" title></a></h3><h3 id="4、engine"><a href="#4、engine" class="headerlink" title="4、engine"></a><strong>4、engine</strong></h3><p>Engine是Docker架构中的运行引擎，同时也Docker运行的核心模块。它扮演Docker container存储仓库的角色，并且通过执行job的方式来操纵管理这些容器。</p>
<p>在Engine数据结构的设计与实现过程中，有一个handler对象。该handler对象存储的都是关于众多特定job的handler处理访问。举例说明，Engine的handler对象中有一项为：{“create”: daemon.ContainerCreate,}，则说明当名为”create”的job在运行时，执行的是daemon.ContainerCreate的handler。</p>
<h3 id="-16"><a href="#-16" class="headerlink" title></a></h3><h3 id="5、job"><a href="#5、job" class="headerlink" title="5、job"></a><strong>5、job</strong></h3><p>一个Job可以认为是Docker架构中Engine内部最基本的工作执行单元。Docker可以做的每一项工作，都可以抽象为一个job。例如：在容器内部运行一个进程，这是一个job；创建一个新的容器，这是一个job，从Internet上下载一个文档，这是一个job；包括之前在Docker Server部分说过的，创建Server服务于HTTP的API，这也是一个job，等等。</p>
<p>Job的设计者，把Job设计得与Unix进程相仿。比如说：Job有一个名称，有参数，有环境变量，有标准的输入输出，有错误处理，有返回状态等。</p>
<h3 id="-17"><a href="#-17" class="headerlink" title></a></h3><h3 id="6、docker-registry"><a href="#6、docker-registry" class="headerlink" title="6、docker registry"></a><strong>6、docker registry</strong></h3><p>Docker Registry是一个存储容器镜像的仓库。而容器镜像是在容器被创建时，被加载用来初始化容器的文件架构与目录。</p>
<p>在Docker的运行过程中，Docker Daemon会与Docker Registry通信，并实现搜索镜像、下载镜像、上传镜像三个功能，这三个功能对应的job名称分别为”search”，”pull” 与 “push”。</p>
<p>其中，在Docker架构中，Docker可以使用公有的Docker Registry，即大家熟知的Docker Hub，如此一来，Docker获取容器镜像文件时，必须通过互联网访问Docker Hub；同时Docker也允许用户构建本地私有的Docker Registry，这样可以保证容器镜像的获取在内网完成。</p>
<h3 id="-18"><a href="#-18" class="headerlink" title></a></h3><h3 id="7、Graph"><a href="#7、Graph" class="headerlink" title="7、Graph"></a><strong>7、Graph</strong></h3><p>Graph在Docker架构中扮演已下载容器镜像的保管者，以及已下载容器镜像之间关系的记录者。一方面，Graph存储着本地具有版本信息的文件系统镜像，另一方面也通过GraphDB记录着所有文件系统镜像彼此之间的关系。</p>
<p>Graph的架构如下：</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572599922235.webp" alt="img"></p>
<p>其中，GraphDB是一个构建在SQLite之上的小型图数据库，实现了节点的命名以及节点之间关联关系的记录。它仅仅实现了大多数图数据库所拥有的一个小的子集，但是提供了简单的接口表示节点之间的关系。</p>
<p>同时在Graph的本地目录中，关于每一个的容器镜像，具体存储的信息有：该容器镜像的元数据，容器镜像的大小信息，以及该容器镜像所代表的具体rootfs。</p>
<p><strong>8、driver</strong></p>
<p>Driver是Docker架构中的驱动模块。通过Driver驱动，Docker可以实现对Docker容器执行环境的定制。由于Docker运行的生命周期中，并非用户所有的操作都是针对Docker容器的管理，另外还有关于Docker运行信息的获取，Graph的存储与记录等。因此，为了将Docker容器的管理从Docker Daemon内部业务逻辑中区分开来，设计了Driver层驱动来接管所有这部分请求。</p>
<p>在Docker Driver的实现中，可以分为以下三类驱动：graphdriver、networkdriver和execdriver。</p>
<p>graphdriver主要用于完成容器镜像的管理，包括存储与获取。即当用户需要下载指定的容器镜像时，graphdriver将容器镜像存储在本地的指定目录；同时当用户需要使用指定的容器镜像来创建容器的rootfs时，graphdriver从本地镜像存储目录中获取指定的容器镜像。</p>
<p>在graphdriver的初始化过程之前，有4种文件系统或类文件系统在其内部注册，它们分别是aufs、btrfs、vfs和devmapper。而Docker在初始化之时，通过获取系统环境变量”DOCKER_DRIVER”来提取所使用driver的指定类型。而之后所有的graph操作，都使用该driver来执行。</p>
<p>graphdriver的架构如下：</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572600680712.webp" alt="img"></p>
<p>networkdriver的用途是完成Docker容器网络环境的配置，其中包括Docker启动时为Docker环境创建网桥；Docker容器创建时为其创建专属虚拟网卡设备；以及为Docker容器分配IP、端口并与宿主机做端口映射，设置容器防火墙策略等。networkdriver的架构如下：</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572600696159.webp" alt="img"></p>
<p>execdriver作为Docker容器的执行驱动，负责创建容器运行命名空间，负责容器资源使用的统计与限制，负责容器内部进程的真正运行等。在execdriver的实现过程中，原先可以使用LXC驱动调用LXC的接口，来操纵容器的配置以及生命周期，而现在execdriver默认使用native驱动，不依赖于LXC。</p>
<p>具体体现在Daemon启动过程中加载的ExecDriverflag参数，该参数在配置文件已经被设为”native”。这可以认为是Docker在1.2版本上一个很大的改变，或者说Docker实现跨平台的一个先兆。execdriver架构如下：</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572600706623.webp" alt="img"></p>
<h3 id="9、libcontainer"><a href="#9、libcontainer" class="headerlink" title="9、libcontainer"></a><strong>9、libcontainer</strong></h3><p>libcontainer是Docker架构中一个使用Go语言设计实现的库，设计初衷是希望该库可以不依靠任何依赖，直接访问内核中与容器相关的API。</p>
<p>正是由于libcontainer的存在，Docker可以直接调用libcontainer，而最终操纵容器的namespace、cgroups、apparmor、网络设备以及防火墙规则等。这一系列操作的完成都不需要依赖LXC或者其他包。libcontainer架构如下：</p>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572600714042.webp" alt="img"></p>
<p>另外，libcontainer提供了一整套标准的接口来满足上层对容器管理的需求。或者说，libcontainer屏蔽了Docker上层对容器的直接管理。又由于libcontainer使用Go这种跨平台的语言开发实现，且本身又可以被上层多种不同的编程语言访问，因此很难说，未来的Docker就一定会紧紧地和Linux捆绑在一起。而于此同时，Microsoft在其著名云计算平台Azure中，也添加了对Docker的支持，可见Docker的开放程度与业界的火热度。</p>
<p>暂不谈Docker，由于libcontainer的功能以及其本身与系统的松耦合特性，很有可能会在其他以容器为原型的平台出现，同时也很有可能催生出云计算领域全新的项目。</p>
<h3 id="10、docker-container"><a href="#10、docker-container" class="headerlink" title="10、docker container"></a><strong>10、docker container</strong></h3><p>Docker container（Docker容器）是Docker架构中服务交付的最终体现形式。</p>
<p>Docker按照用户的需求与指令，订制相应的Docker容器：</p>
<ul>
<li>用户通过指定容器镜像，使得Docker容器可以自定义rootfs等文件系统；</li>
<li>用户通过指定计算资源的配额，使得Docker容器使用指定的计算资源；</li>
<li>用户通过配置网络及其安全策略，使得Docker容器拥有独立且安全的网络环境；</li>
<li>用户通过指定运行的命令，使得Docker容器执行指定的工作。</li>
</ul>
<p><img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572600728419.webp" alt="img"></p>
<h2 id="四、docker简单使用"><a href="#四、docker简单使用" class="headerlink" title="四、docker简单使用"></a><strong>四、docker简单使用</strong></h2><h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a><strong>1、安装</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker -y systemctl enable dockersystemctl start docker</span><br></pre></td></tr></table></figure>

<p>注意：启动前应当设置源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure>



<p>这里设置阿里的，注册阿里云账户号每个用户都有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# vim /usr/lib/systemd/system/docker.service</span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Docker Application Container Engine</span><br><span class="line">Documentation=http://docs.docker.com</span><br><span class="line">After=network.target</span><br><span class="line">Wants=docker-storage-setup.service</span><br><span class="line">Requires=docker-cleanup.timer</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">NotifyAccess=main</span><br><span class="line">EnvironmentFile=-/run/containers/registries.conf</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/docker</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/docker-storage</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/docker-network</span><br><span class="line">Environment=GOTRACEBACK=crash</span><br><span class="line">Environment=DOCKER_HTTP_HOST_COMPAT=1</span><br><span class="line">Environment=PATH=/usr/libexec/docker:/usr/bin:/usr/sbin</span><br><span class="line">ExecStart=/usr/bin/dockerd-current --registry-mirror=https://rfcod7oz.mirror.aliyuncs.com  #这个值可以登陆阿里云账号请参考下图</span><br><span class="line">          --add-runtime docker-runc=/usr/libexec/docker/docker-runc-current </span><br><span class="line">          --default-runtime=docker-runc </span><br><span class="line">          --exec-opt native.cgroupdriver=systemd </span><br><span class="line">          --userland-proxy-path=/usr/libexec/docker/docker-proxy-current </span><br><span class="line">          --init-path=/usr/libexec/docker/docker-init-current </span><br><span class="line">          --seccomp-profile=/etc/docker/seccomp.json </span><br><span class="line">          $OPTIONS </span><br><span class="line">          $DOCKER_STORAGE_OPTIONS </span><br><span class="line">          $DOCKER_NETWORK_OPTIONS </span><br><span class="line">          $ADD_REGISTRY </span><br><span class="line">          $BLOCK_REGISTRY </span><br><span class="line">          $INSECURE_REGISTRY </span><br><span class="line">          $REGISTRIES</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">LimitNOFILE=1048576</span><br><span class="line">LimitNPROC=1048576</span><br><span class="line">LimitCORE=infinity</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">Restart=on-abnormal</span><br><span class="line">KillMode=process</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>　　<img src="/2019/10/31/%E7%BB%88%E4%BA%8E%E6%9C%89%E4%BA%BA%E6%8A%8ADocker%E8%AE%B2%E6%B8%85%E6%A5%9A%E4%BA%86/640-1572601422584.webp" alt="img">　</p>
<h3 id="2、docker版本查询"><a href="#2、docker版本查询" class="headerlink" title="2、docker版本查询"></a><strong>2、docker版本查询</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# docker version</span><br></pre></td></tr></table></figure>



<h3 id="3、搜索下载镜像"><a href="#3、搜索下载镜像" class="headerlink" title="3、搜索下载镜像"></a><strong>3、搜索下载镜像</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull alpine　　　　　　　　　　#下载镜像docker search nginx　　　　　　　　　 #查看镜像docker pull nginx</span><br></pre></td></tr></table></figure>



<h3 id="4、查看已经下载的镜像"><a href="#4、查看已经下载的镜像" class="headerlink" title="4、查看已经下载的镜像"></a><strong>4、查看已经下载的镜像</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# docker imagesREPOSITORY          TAG                 IMAGE ID            CREATED             SIZEzxg/my_nginx        v1                  b164f4c07c64        8 days ago          126 MBzxg/my_nginx        latest              f07837869dfc        8 days ago          126 MBdocker.io/nginx     latest              e445ab08b2be        2 weeks ago         126 MBdocker.io/alpine    latest              b7b28af77ffe        3 weeks ago         5.58 MBdocker.io/centos    latest              9f38484d220f        4 months ago        202 MB[root@web1 ~]#</span><br></pre></td></tr></table></figure>



<h3 id="5、导出镜像"><a href="#5、导出镜像" class="headerlink" title="5、导出镜像"></a><strong>5、导出镜像</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  save nginx &gt;/tmp/nginx.tar.gz</span><br></pre></td></tr></table></figure>



<h3 id="6、删除镜像"><a href="#6、删除镜像" class="headerlink" title="6、删除镜像"></a><strong>6、删除镜像</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f nginx</span><br></pre></td></tr></table></figure>



<h3 id="7、导入镜像"><a href="#7、导入镜像" class="headerlink" title="7、导入镜像"></a><strong>7、导入镜像</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load &lt;/tmp/nginx.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="-19"><a href="#-19" class="headerlink" title></a></h3><h3 id="8、默认配置文件"><a href="#8、默认配置文件" class="headerlink" title="8、默认配置文件"></a><strong>8、默认配置文件</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure>



<p>如果更改存储目录就添加　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--graph=/opt/docker</span><br></pre></td></tr></table></figure>





<p>如果更改DNS——默认采用宿主机的dns</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--dns=xxxx的方式指定</span><br></pre></td></tr></table></figure>



<h3 id="9、运行hello-world"><a href="#9、运行hello-world" class="headerlink" title="9、运行hello world"></a><strong>9、运行hello world</strong></h3><p>这里用centos镜像echo一个hello word</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]#  docker images</span><br></pre></td></tr></table></figure>



<h3 id="10、运行一个容器-run"><a href="#10、运行一个容器-run" class="headerlink" title="10、运行一个容器-run"></a><strong>10、运行一个容器-run</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker run -it alpine sh   #运行并进入alpine</span><br></pre></td></tr></table></figure>



<p>后台运行（-d后台运行）（–name添加一个名字）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker run -it -d --name test1</span><br></pre></td></tr></table></figure>



<p>还有一种-rm参数，ctrl+c后就删除，可以测试环境用，生成环境用的少</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker run -it  --rm --name centos nginx</span><br></pre></td></tr></table></figure>



<h3 id="11、如何进入容器"><a href="#11、如何进入容器" class="headerlink" title="11、如何进入容器"></a><strong>11、如何进入容器</strong></h3><p>三种方法，上面已经演示了一种</p>
<p>第一种，需要容器本身的pid及util-linux，不推荐，暂时不演示了</p>
<p>第二种，不分配bash终端的一种实施操作，不推荐，这种操作如果在开一个窗口也能看到操作的指令，所有人都能看到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker ps</span><br><span class="line">[root@web1 overlay2]# docker attach mynginx</span><br></pre></td></tr></table></figure>



<p>第三种：exec方式，终端时分开的，推荐</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker exec -it mynginx sh</span><br></pre></td></tr></table></figure>



<h3 id="12、查看docker进程及删除容器"><a href="#12、查看docker进程及删除容器" class="headerlink" title="12、查看docker进程及删除容器"></a><strong>12、查看docker进程及删除容器</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]# docker ps -a 　　　　　　#-a :显示所有的容器，包括未运行的CONTAINER ID      [root@web1 overlay2]# docker rm 9fc796e928d7 #rm时删除一个或多个容器9fc796e928d7</span><br></pre></td></tr></table></figure>



<h3 id="13、查看容器详细信息"><a href="#13、查看容器详细信息" class="headerlink" title="13、查看容器详细信息"></a><strong>13、查看容器详细信息</strong></h3><p>并不需要进入到容器里面，通过查看详细信息看到了刚才运行的nginx，宿主机curl ip地址访问一下运行情况。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 overlay2]#  docker inspect mynginx</span><br><span class="line">[root@web1 overlay2]#</span><br></pre></td></tr></table></figure>



<h3 id="14、查看日志"><a href="#14、查看日志" class="headerlink" title="14、查看日志"></a><strong>14、查看日志</strong></h3><p>-f  挂起这个终端，动态查看日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web1 ~]# docker logs  -f mynginx</span><br></pre></td></tr></table></figure>



<p><strong>参考文章：</strong></p>
<p><a href="https://cloud.tencent.com/developer/article/1006116" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1006116</a>  </p>
<p><a href="https://yq.aliyun.com/articles/65145" target="_blank" rel="noopener">https://yq.aliyun.com/articles/65145</a></p>
<p><a href="https://blog.51cto.com/10085711/2068290" target="_blank" rel="noopener">https://blog.51cto.com/10085711/2068290</a></p>
<p><a href="https://www.cnblogs.com/zuxing/articles/8717415.html" target="_blank" rel="noopener">https://www.cnblogs.com/zuxing/articles/8717415.html</a></p>

    </div>
	
	<div>
		
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
		
	</div>

    
    
    <div class="post-widgets">
      <div id="needsharebutton-postbottom">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    </div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"><i class="fa fa-tag"></i> docker</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2019/10/31/sourcetree3%E5%85%8D%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95bitbucket%E6%95%99%E7%A8%8B/" rel="next" title="sourcetree3免注册登录bitbucket教程">
                  <i class="fa fa-chevron-left"></i> sourcetree3免注册登录bitbucket教程
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2019/10/31/K8S%E9%83%A8%E7%BD%B2%E7%AE%80%E4%BB%8B/" rel="prev" title="K8S部署简介">
                  K8S部署简介 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

 <div class="comments" id="comments">
    
<script src="https://utteranc.es/client.js"
        repo="geoffen/blog_comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

 </div>


        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#终于有人把-Docker-讲清楚了"><span class="nav-number">1.</span> <span class="nav-text">终于有人把 Docker 讲清楚了</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一、简介"><span class="nav-number">2.</span> <span class="nav-text">一、简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">2.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1、了解Docker的前生LXC"><span class="nav-number">2.2.</span> <span class="nav-text">1、了解Docker的前生LXC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、LXC与docker什么关系？"><span class="nav-number">2.3.</span> <span class="nav-text">2、LXC与docker什么关系？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、什么是docker"><span class="nav-number">2.4.</span> <span class="nav-text">3、什么是docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-1"><span class="nav-number">2.5.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、docker官方文档"><span class="nav-number">2.6.</span> <span class="nav-text">4、docker官方文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-2"><span class="nav-number">2.7.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、为什么docker越来越受欢迎"><span class="nav-number">2.8.</span> <span class="nav-text">5、为什么docker越来越受欢迎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-3"><span class="nav-number">2.9.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像和容器（contalners）"><span class="nav-number">2.10.</span> <span class="nav-text">镜像和容器（contalners）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#容器和虚拟机"><span class="nav-number">2.11.</span> <span class="nav-text">容器和虚拟机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-4"><span class="nav-number">2.12.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、docker版本"><span class="nav-number">2.13.</span> <span class="nav-text">6、docker版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-5"><span class="nav-number">2.14.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、docker和openstack的几项对比"><span class="nav-number">2.15.</span> <span class="nav-text">7、docker和openstack的几项对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、容器在内核中支持2种重要技术"><span class="nav-number">2.16.</span> <span class="nav-text">8、容器在内核中支持2种重要技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-6"><span class="nav-number">2.17.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、了解docker三个重要概念"><span class="nav-number">2.18.</span> <span class="nav-text">9、了解docker三个重要概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-7"><span class="nav-number">2.19.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、docker的主要用途"><span class="nav-number">2.20.</span> <span class="nav-text">10、docker的主要用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-8"><span class="nav-number">2.21.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11、docker改变了什么"><span class="nav-number">2.22.</span> <span class="nav-text">11、docker改变了什么</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、docker架构"><span class="nav-number">3.</span> <span class="nav-text">二、docker架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#-9"><span class="nav-number">3.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1、总体架构"><span class="nav-number">3.2.</span> <span class="nav-text">1、总体架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-10"><span class="nav-number">3.3.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、docker架构2"><span class="nav-number">3.4.</span> <span class="nav-text">2、docker架构2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-11"><span class="nav-number">3.5.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、docker架构3"><span class="nav-number">3.6.</span> <span class="nav-text">3、docker架构3</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、docker架构2各个模块的功能（带完善）"><span class="nav-number">4.</span> <span class="nav-text">三、docker架构2各个模块的功能（带完善）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#-12"><span class="nav-number">4.1.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1、docker-client"><span class="nav-number">4.2.</span> <span class="nav-text">1、docker client</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-13"><span class="nav-number">4.3.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、docker-daemon"><span class="nav-number">4.4.</span> <span class="nav-text">2、docker daemon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-14"><span class="nav-number">4.5.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、docker-server"><span class="nav-number">4.6.</span> <span class="nav-text">3、docker server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-15"><span class="nav-number">4.7.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、engine"><span class="nav-number">4.8.</span> <span class="nav-text">4、engine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-16"><span class="nav-number">4.9.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、job"><span class="nav-number">4.10.</span> <span class="nav-text">5、job</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-17"><span class="nav-number">4.11.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、docker-registry"><span class="nav-number">4.12.</span> <span class="nav-text">6、docker registry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-18"><span class="nav-number">4.13.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、Graph"><span class="nav-number">4.14.</span> <span class="nav-text">7、Graph</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、libcontainer"><span class="nav-number">4.15.</span> <span class="nav-text">9、libcontainer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、docker-container"><span class="nav-number">4.16.</span> <span class="nav-text">10、docker container</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、docker简单使用"><span class="nav-number">5.</span> <span class="nav-text">四、docker简单使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、安装"><span class="nav-number">5.1.</span> <span class="nav-text">1、安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、docker版本查询"><span class="nav-number">5.2.</span> <span class="nav-text">2、docker版本查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、搜索下载镜像"><span class="nav-number">5.3.</span> <span class="nav-text">3、搜索下载镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、查看已经下载的镜像"><span class="nav-number">5.4.</span> <span class="nav-text">4、查看已经下载的镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、导出镜像"><span class="nav-number">5.5.</span> <span class="nav-text">5、导出镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、删除镜像"><span class="nav-number">5.6.</span> <span class="nav-text">6、删除镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、导入镜像"><span class="nav-number">5.7.</span> <span class="nav-text">7、导入镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-19"><span class="nav-number">5.8.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、默认配置文件"><span class="nav-number">5.9.</span> <span class="nav-text">8、默认配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、运行hello-world"><span class="nav-number">5.10.</span> <span class="nav-text">9、运行hello world</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、运行一个容器-run"><span class="nav-number">5.11.</span> <span class="nav-text">10、运行一个容器-run</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11、如何进入容器"><span class="nav-number">5.12.</span> <span class="nav-text">11、如何进入容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12、查看docker进程及删除容器"><span class="nav-number">5.13.</span> <span class="nav-text">12、查看docker进程及删除容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13、查看容器详细信息"><span class="nav-number">5.14.</span> <span class="nav-text">13、查看容器详细信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14、查看日志"><span class="nav-number">5.15.</span> <span class="nav-text">14、查看日志</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Frank"
    src="/images/portrait.jpg">
  <p class="site-author-name" itemprop="name">Frank</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">65</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/geoffen" title="GitHub https:&#x2F;&#x2F;github.com&#x2F;geoffen" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/234821810" title="Weibo https:&#x2F;&#x2F;weibo.com&#x2F;234821810" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:foreverlovemichael@gmail.com" title="E-Mail mailto:foreverlovemichael@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/losincasablanca" title="Twitter https:&#x2F;&#x2F;twitter.com&#x2F;losincasablanca" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
  <i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">访问量<span id="busuanzi_value_site_pv"></span>次</span>
</div>
<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Frank</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">626k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">9:29</span>
</div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.2
  </div>
-->

        












        
      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.2"></script><script src="/js/motion.js?v=7.4.2"></script>
<script src="/js/schemes/pisces.js?v=7.4.2"></script>
<script src="/js/next-boot.js?v=7.4.2"></script>



  






  <script src="/js/local-search.js?v=7.4.2"></script>













  

  

  

  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      pbOptions = {};
        pbOptions.iconStyle = "box";
        pbOptions.boxForm = "horizontal";
        pbOptions.position = "bottomCenter";
        pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      new needShareButton('#needsharebutton-postbottom', pbOptions);
  </script>
</body>

</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
